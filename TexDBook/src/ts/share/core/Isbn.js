"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const api_1 = require("../../client/core/api");
const anyWindow_1 = require("../../client/util/anyWindow");
const GROUPS = {
    "0": {
        code: "0",
        name: "English language",
        ranges: [
            ["00", "19"], ["200", "699"], ["7000", "8499"], ["85000", "89999"], ["900000", "949999"],
            ["9500000", "9999999"]
        ],
    },
    "1": {
        code: "1",
        name: "English language",
        ranges: [
            ["00", "09"], ["100", "399"], ["4000", "5499"], ["55000", "86979"], ["869800", "998999"],
            ["9990000", "9999999"]
        ],
    },
    "2": {
        code: "2",
        name: "French language",
        ranges: [
            ["00", "19"], ["200", "349"], ["35000", "39999"], ["400", "699"], ["7000", "8399"], ["84000", "89999"],
            ["900000", "949999"], ["9500000", "9999999"]
        ],
    },
    "3": {
        code: "3",
        name: "German language",
        ranges: [
            ["00", "02"], ["030", "033"], ["0340", "0369"], ["03700", "03999"], ["04", "19"], ["200", "699"],
            ["7000", "8499"], ["85000", "89999"], ["900000", "949999"], ["9500000", "9539999"], ["95400", "96999"],
            ["9700000", "9899999"], ["99000", "99499"], ["99500", "99999"]
        ],
    },
    "4": {
        code: "4",
        name: "Japan",
        ranges: [
            ["00", "19"], ["200", "699"], ["7000", "8499"], ["85000", "89999"], ["900000", "949999"],
            ["9500000", "9999999"]
        ],
    },
    "5": {
        code: "5",
        name: "former U.S.S.R",
        ranges: [
            ["00000", "00499"], ["0050", "0099"], ["01", "19"], ["200", "420"], ["4210", "4299"], ["430", "430"],
            ["4310", "4399"], ["440", "440"], ["4410", "4499"], ["450", "699"], ["7000", "8499"], ["85000", "89999"],
            ["900000", "909999"], ["91000", "91999"], ["9200", "9299"], ["93000", "94999"], ["9500000", "9500999"],
            ["9501", "9799"], ["98000", "98999"], ["9900000", "9909999"], ["9910", "9999"]
        ],
    },
    "600": {
        code: "600",
        name: "Iran",
        ranges: [["00", "09"], ["100", "499"], ["5000", "8999"], ["90000", "99999"]],
    },
    "601": {
        code: "601",
        name: "Kazakhstan",
        ranges: [["00", "19"], ["200", "699"], ["7000", "7999"], ["80000", "84999"], ["85", "99"]],
    },
    "602": {
        code: "602",
        name: "Indonesia",
        ranges: [
            ["00", "10"], ["1100", "1199"], ["1200", "1399"], ["14000", "14999"], ["1500", "1699"], ["17000", "17999"],
            ["18000", "18999"], ["19000", "19999"], ["200", "699"], ["70000", "74999"], ["7500", "7999"],
            ["8000", "9499"], ["95000", "99999"]
        ],
    },
    "603": {
        code: "603",
        name: "Saudi Arabia",
        ranges: [["00", "04"], ["05", "49"], ["500", "799"], ["8000", "8999"], ["90000", "99999"]],
    },
    "604": {
        code: "604",
        name: "Vietnam",
        ranges: [["0", "4"], ["50", "89"], ["900", "979"], ["9800", "9999"]],
    },
    "605": {
        code: "605",
        name: "Turkey",
        ranges: [["01", "09"], ["100", "399"], ["4000", "5999"], ["60000", "89999"], ["9000", "9999"]],
    },
    "606": {
        code: "606",
        name: "Romania",
        ranges: [["0", "0"], ["10", "49"], ["500", "799"], ["8000", "9199"], ["92000", "99999"]],
    },
    "607": {
        code: "607",
        name: "Mexico",
        ranges: [["00", "39"], ["400", "749"], ["7500", "9499"], ["95000", "99999"]],
    },
    "608": {
        code: "608",
        name: "Macedonia",
        ranges: [["0", "0"], ["10", "19"], ["200", "449"], ["4500", "6499"], ["65000", "69999"], ["7", "9"]],
    },
    "609": {
        code: "609",
        name: "Lithuania",
        ranges: [["00", "39"], ["400", "799"], ["8000", "9499"], ["95000", "99999"]],
    },
    "611": {
        code: "611",
        name: "Thailand",
        ranges: []
    },
    "612": {
        code: "612",
        name: "Peru",
        ranges: [["00", "29"], ["300", "399"], ["4000", "4499"], ["45000", "49999"], ["50", "99"]],
    },
    "613": {
        code: "613",
        name: "Mauritius",
        ranges: [["0", "9"]],
    },
    "614": {
        code: "614",
        name: "Lebanon",
        ranges: [["00", "39"], ["400", "799"], ["8000", "9499"], ["95000", "99999"]],
    },
    "615": {
        code: "615",
        name: "Hungary",
        ranges: [["00", "09"], ["100", "499"], ["5000", "7999"], ["80000", "89999"]],
    },
    "616": {
        code: "616",
        name: "Thailand",
        ranges: [["00", "19"], ["200", "699"], ["7000", "8999"], ["90000", "99999"]],
    },
    "617": {
        code: "617",
        name: "Ukraine",
        ranges: [["00", "49"], ["500", "699"], ["7000", "8999"], ["90000", "99999"]],
    },
    "618": {
        code: "618",
        name: "Greece",
        ranges: [["00", "19"], ["200", "499"], ["5000", "7999"], ["80000", "99999"]],
    },
    "619": {
        code: "619",
        name: "Bulgaria",
        ranges: [["00", "14"], ["150", "699"], ["7000", "8999"], ["90000", "99999"]],
    },
    "620": {
        code: "620",
        name: "Mauritius",
        ranges: [["0", "9"]],
    },
    "621": {
        code: "621",
        name: "Philippines",
        ranges: [["00", "29"], ["400", "599"], ["8000", "8999"], ["95000", "99999"]],
    },
    "7": {
        code: "7",
        name: "China, People's Republic",
        ranges: [["00", "09"], ["100", "499"], ["5000", "7999"], ["80000", "89999"], ["900000", "999999"]],
    },
    "80": {
        code: "80",
        name: "former Czechoslovakia",
        ranges: [["00", "19"], ["200", "699"], ["7000", "8499"], ["85000", "89999"], ["900000", "999999"]],
    },
    "81": {
        code: "81",
        name: "India",
        ranges: [["00", "19"], ["200", "699"], ["7000", "8499"], ["85000", "89999"], ["900000", "999999"]],
    },
    "82": {
        code: "82",
        name: "Norway",
        ranges: [["00", "19"], ["200", "699"], ["7000", "8999"], ["90000", "98999"], ["990000", "999999"]],
    },
    "83": {
        code: "83",
        name: "Poland",
        ranges: [
            ["00", "19"], ["200", "599"], ["60000", "69999"], ["7000", "8499"], ["85000", "89999"], ["900000", "999999"]
        ],
    },
    "84": {
        code: "84",
        name: "Spain",
        ranges: [
            ["00", "13"], ["140", "149"], ["15000", "19999"], ["200", "699"], ["7000", "8499"], ["85000", "89999"],
            ["9000", "9199"], ["920000", "923999"], ["92400", "92999"], ["930000", "949999"], ["95000", "96999"],
            ["9700", "9999"]
        ],
    },
    "85": {
        code: "85",
        name: "Brazil",
        ranges: [
            ["00", "19"], ["200", "599"], ["60000", "69999"], ["7000", "8499"], ["85000", "89999"],
            ["900000", "979999"], ["98000", "99999"]
        ],
    },
    "86": {
        code: "86",
        name: "former Yugoslavia",
        ranges: [["00", "29"], ["300", "599"], ["6000", "7999"], ["80000", "89999"], ["900000", "999999"]],
    },
    "87": {
        code: "87",
        name: "Denmark",
        ranges: [["00", "29"], ["400", "649"], ["7000", "7999"], ["85000", "94999"], ["970000", "999999"]],
    },
    "88": {
        code: "88",
        name: "Italy",
        ranges: [
            ["00", "19"], ["200", "599"], ["6000", "8499"], ["85000", "89999"], ["900000", "909999"], ["910", "929"],
            ["9300", "9399"], ["940000", "949999"], ["95000", "99999"]
        ],
    },
    "89": {
        code: "89",
        name: "Korea, Republic",
        ranges: [
            ["00", "24"], ["250", "549"], ["5500", "8499"], ["85000", "94999"], ["950000", "969999"],
            ["97000", "98999"], ["990", "999"]
        ],
    },
    "90": {
        code: "90",
        name: "Netherlands",
        ranges: [
            ["00", "19"], ["200", "499"], ["5000", "6999"], ["70000", "79999"], ["800000", "849999"], ["8500", "8999"],
            ["90", "90"], ["94", "94"]
        ],
    },
    "91": {
        code: "91",
        name: "Sweden",
        ranges: [["0", "1"], ["20", "49"], ["500", "649"], ["7000", "7999"], ["85000", "94999"], ["970000", "999999"]],
    },
    "92": {
        code: "92",
        name: "International NGO Publishers and EC Organizations",
        ranges: [["0", "5"], ["60", "79"], ["800", "899"], ["9000", "9499"], ["95000", "98999"], ["990000", "999999"]],
    },
    "93": {
        code: "93",
        name: "India",
        ranges: [["00", "09"], ["100", "499"], ["5000", "7999"], ["80000", "94999"], ["950000", "999999"]],
    },
    "94": {
        code: "94",
        name: "Netherlands",
        ranges: [["000", "599"], ["6000", "8999"], ["90000", "99999"]],
    },
    "950": {
        code: "950",
        name: "Argentina",
        ranges: [["00", "49"], ["500", "899"], ["9000", "9899"], ["99000", "99999"]],
    },
    "951": {
        code: "951",
        name: "Finland",
        ranges: [["0", "1"], ["20", "54"], ["550", "889"], ["8900", "9499"], ["95000", "99999"]],
    },
    "952": {
        code: "952",
        name: "Finland",
        ranges: [
            ["00", "19"], ["200", "499"], ["5000", "5999"], ["60", "65"], ["6600", "6699"], ["67000", "69999"],
            ["7000", "7999"], ["80", "94"], ["9500", "9899"], ["99000", "99999"]
        ],
    },
    "953": {
        code: "953",
        name: "Croatia",
        ranges: [
            ["0", "0"], ["10", "14"], ["150", "509"], ["51", "54"], ["55000", "59999"], ["6000", "9499"],
            ["95000", "99999"]
        ],
    },
    "954": {
        code: "954",
        name: "Bulgaria",
        ranges: [
            ["00", "28"], ["2900", "2999"], ["300", "799"], ["8000", "8999"], ["90000", "92999"], ["9300", "9999"]
        ],
    },
    "955": {
        code: "955",
        name: "Sri Lanka",
        ranges: [
            ["0000", "1999"], ["20", "40"], ["41000", "43999"], ["44000", "44999"], ["4500", "4999"],
            ["50000", "54999"], ["550", "749"], ["7500", "7999"], ["8000", "9499"], ["95000", "99999"]
        ],
    },
    "956": {
        code: "956",
        name: "Chile",
        ranges: [["00", "19"], ["200", "699"], ["7000", "9999"]],
    },
    "957": {
        code: "957",
        name: "Taiwan",
        ranges: [
            ["00", "02"], ["0300", "0499"], ["05", "19"], ["2000", "2099"], ["21", "27"], ["28000", "30999"],
            ["31", "43"], ["440", "819"], ["8200", "9699"], ["97000", "99999"]
        ],
    },
    "958": {
        code: "958",
        name: "Colombia",
        ranges: [["00", "56"], ["57000", "59999"], ["600", "799"], ["8000", "9499"], ["95000", "99999"]],
    },
    "959": {
        code: "959",
        name: "Cuba",
        ranges: [["00", "19"], ["200", "699"], ["7000", "8499"], ["85000", "99999"]],
    },
    "960": {
        code: "960",
        name: "Greece",
        ranges: [
            ["00", "19"], ["200", "659"], ["6600", "6899"], ["690", "699"], ["7000", "8499"], ["85000", "92999"],
            ["93", "93"], ["9400", "9799"], ["98000", "99999"]
        ],
    },
    "961": {
        code: "961",
        name: "Slovenia",
        ranges: [["00", "19"], ["200", "599"], ["6000", "8999"], ["90000", "94999"]],
    },
    "962": {
        code: "962",
        name: "Hong Kong, China",
        ranges: [["00", "19"], ["200", "699"], ["7000", "8499"], ["85000", "86999"], ["8700", "8999"], ["900", "999"]],
    },
    "963": {
        code: "963",
        name: "Hungary",
        ranges: [["00", "19"], ["200", "699"], ["7000", "8499"], ["85000", "89999"], ["9000", "9999"]],
    },
    "964": {
        code: "964",
        name: "Iran",
        ranges: [
            ["00", "14"], ["150", "249"], ["2500", "2999"], ["300", "549"], ["5500", "8999"], ["90000", "96999"],
            ["970", "989"], ["9900", "9999"]
        ],
    },
    "965": {
        code: "965",
        name: "Israel",
        ranges: [["00", "19"], ["200", "599"], ["7000", "7999"], ["90000", "99999"]],
    },
    "966": {
        code: "966",
        name: "Ukraine",
        ranges: [
            ["00", "12"], ["130", "139"], ["14", "14"], ["1500", "1699"], ["170", "199"], ["2000", "2789"],
            ["279", "289"], ["2900", "2999"], ["300", "699"], ["7000", "8999"], ["90000", "90999"], ["910", "949"],
            ["95000", "97999"], ["980", "999"]
        ],
    },
    "967": {
        code: "967",
        name: "Malaysia",
        ranges: [
            ["00", "00"], ["0100", "0999"], ["10000", "19999"], ["300", "499"], ["5000", "5999"], ["60", "89"],
            ["900", "989"], ["9900", "9989"], ["99900", "99999"]
        ],
    },
    "968": {
        code: "968",
        name: "Mexico",
        ranges: [["01", "39"], ["400", "499"], ["5000", "7999"], ["800", "899"], ["9000", "9999"]],
    },
    "969": {
        code: "969",
        name: "Pakistan",
        ranges: [["0", "1"], ["20", "39"], ["400", "799"], ["8000", "9999"]],
    },
    "970": {
        code: "970",
        name: "Mexico",
        ranges: [["01", "59"], ["600", "899"], ["9000", "9099"], ["91000", "96999"], ["9700", "9999"]],
    },
    "971": {
        code: "971",
        name: "Philippines",
        ranges: [
            ["000", "015"], ["0160", "0199"], ["02", "02"], ["0300", "0599"], ["06", "49"], ["500", "849"],
            ["8500", "9099"], ["91000", "95999"], ["9600", "9699"], ["97", "98"], ["9900", "9999"]
        ],
    },
    "972": {
        code: "972",
        name: "Portugal",
        ranges: [["0", "1"], ["20", "54"], ["550", "799"], ["8000", "9499"], ["95000", "99999"]],
    },
    "973": {
        code: "973",
        name: "Romania",
        ranges: [
            ["0", "0"], ["100", "169"], ["1700", "1999"], ["20", "54"], ["550", "759"], ["7600", "8499"],
            ["85000", "88999"], ["8900", "9499"], ["95000", "99999"]
        ],
    },
    "974": {
        code: "974",
        name: "Thailand",
        ranges: [
            ["00", "19"], ["200", "699"], ["7000", "8499"], ["85000", "89999"], ["90000", "94999"], ["9500", "9999"]
        ],
    },
    "975": {
        code: "975",
        name: "Turkey",
        ranges: [
            ["00000", "01999"], ["02", "24"], ["250", "599"], ["6000", "9199"], ["92000", "98999"], ["990", "999"]
        ],
    },
    "976": {
        code: "976",
        name: "Caribbean Community",
        ranges: [["0", "3"], ["40", "59"], ["600", "799"], ["8000", "9499"], ["95000", "99999"]],
    },
    "977": {
        code: "977",
        name: "Egypt",
        ranges: [["00", "19"], ["200", "499"], ["5000", "6999"], ["700", "849"], ["85000", "89999"], ["90", "99"]],
    },
    "978": {
        code: "978",
        name: "Nigeria",
        ranges: [["000", "199"], ["2000", "2999"], ["30000", "79999"], ["8000", "8999"], ["900", "999"]],
    },
    "979": {
        code: "979",
        name: "Indonesia",
        ranges: [
            ["000", "099"], ["1000", "1499"], ["15000", "19999"], ["20", "29"], ["3000", "3999"], ["400", "799"],
            ["8000", "9499"], ["95000", "99999"]
        ],
    },
    "980": {
        code: "980",
        name: "Venezuela",
        ranges: [["00", "19"], ["200", "599"], ["6000", "9999"]],
    },
    "981": {
        code: "981",
        name: "Singapore",
        ranges: [
            ["00", "11"], ["17000", "19999"], ["200", "289"], ["290", "299"], ["3000", "3099"], ["310", "399"],
            ["4000", "9999"]
        ],
    },
    "982": {
        code: "982",
        name: "South Pacific",
        ranges: [["00", "09"], ["100", "699"], ["70", "89"], ["9000", "9799"], ["98000", "99999"]],
    },
    "983": {
        code: "983",
        name: "Malaysia",
        ranges: [
            ["00", "01"], ["020", "199"], ["2000", "3999"], ["40000", "44999"], ["45", "49"], ["50", "79"],
            ["800", "899"], ["9000", "9899"], ["99000", "99999"]
        ],
    },
    "984": {
        code: "984",
        name: "Bangladesh",
        ranges: [["00", "39"], ["400", "799"], ["8000", "8999"], ["90000", "99999"]],
    },
    "985": {
        code: "985",
        name: "Belarus",
        ranges: [["00", "39"], ["400", "599"], ["6000", "8999"], ["90000", "99999"]],
    },
    "986": {
        code: "986",
        name: "Taiwan",
        ranges: [["00", "11"], ["120", "559"], ["5600", "7999"], ["80000", "99999"]],
    },
    "987": {
        code: "987",
        name: "Argentina",
        ranges: [
            ["00", "09"], ["1000", "1999"], ["20000", "29999"], ["30", "35"], ["3600", "3999"], ["40", "44"],
            ["45000", "49999"], ["500", "899"], ["9000", "9499"], ["95000", "99999"]
        ],
    },
    "988": {
        code: "988",
        name: "Hong Kong, China",
        ranges: [
            ["00", "11"], ["12000", "14999"], ["15000", "16999"], ["17000", "19999"], ["200", "799"], ["8000", "9699"],
            ["97000", "99999"]
        ],
    },
    "989": {
        code: "989",
        name: "Portugal",
        ranges: [["0", "1"], ["20", "54"], ["550", "799"], ["8000", "9499"], ["95000", "99999"]],
    },
    "9927": {
        code: "9927",
        name: "Qatar",
        ranges: [["00", "09"], ["100", "399"], ["4000", "4999"]],
    },
    "9928": {
        code: "9928",
        name: "Albania",
        ranges: [["00", "09"], ["100", "399"], ["4000", "4999"]],
    },
    "9929": {
        code: "9929",
        name: "Guatemala",
        ranges: [["0", "3"], ["40", "54"], ["550", "799"], ["8000", "9999"]],
    },
    "9930": {
        code: "9930",
        name: "Costa Rica",
        ranges: [["00", "49"], ["500", "939"], ["9400", "9999"]],
    },
    "9931": {
        code: "9931",
        name: "Algeria",
        ranges: [["00", "29"], ["300", "899"], ["9000", "9999"]],
    },
    "9932": {
        code: "9932",
        name: "Lao People's Democratic Republic",
        ranges: [["00", "39"], ["400", "849"], ["8500", "9999"]],
    },
    "9933": {
        code: "9933",
        name: "Syria",
        ranges: [["0", "0"], ["10", "39"], ["400", "899"], ["9000", "9999"]],
    },
    "9934": {
        code: "9934",
        name: "Latvia",
        ranges: [["0", "0"], ["10", "49"], ["500", "799"], ["8000", "9999"]],
    },
    "9935": {
        code: "9935",
        name: "Iceland",
        ranges: [["0", "0"], ["10", "39"], ["400", "899"], ["9000", "9999"]],
    },
    "9936": {
        code: "9936",
        name: "Afghanistan",
        ranges: [["0", "1"], ["20", "39"], ["400", "799"], ["8000", "9999"]],
    },
    "9937": {
        code: "9937",
        name: "Nepal",
        ranges: [["0", "2"], ["30", "49"], ["500", "799"], ["8000", "9999"]],
    },
    "9938": {
        code: "9938",
        name: "Tunisia",
        ranges: [["00", "79"], ["800", "949"], ["9500", "9999"]],
    },
    "9939": {
        code: "9939",
        name: "Armenia",
        ranges: [["0", "4"], ["50", "79"], ["800", "899"], ["9000", "9999"]],
    },
    "9940": {
        code: "9940",
        name: "Montenegro",
        ranges: [["0", "1"], ["20", "49"], ["500", "899"], ["9000", "9999"]],
    },
    "9941": {
        code: "9941",
        name: "Georgia",
        ranges: [["0", "0"], ["10", "39"], ["400", "899"], ["9000", "9999"]],
    },
    "9942": {
        code: "9942",
        name: "Ecuador",
        ranges: [["00", "84"], ["8500", "8999"], ["900", "984"], ["9850", "9999"]],
    },
    "9943": {
        code: "9943",
        name: "Uzbekistan",
        ranges: [["00", "29"], ["300", "399"], ["4000", "9999"]],
    },
    "9944": {
        code: "9944",
        name: "Turkey",
        ranges: [
            ["0000", "0999"], ["100", "499"], ["5000", "5999"], ["60", "69"], ["700", "799"], ["80", "89"],
            ["900", "999"]
        ],
    },
    "9945": {
        code: "9945",
        name: "Dominican Republic",
        ranges: [
            ["00", "00"], ["010", "079"], ["08", "39"], ["400", "569"], ["57", "57"], ["580", "849"], ["8500", "9999"]
        ],
    },
    "9946": {
        code: "9946",
        name: "Korea, P.K.R.",
        ranges: [["0", "1"], ["20", "39"], ["400", "899"], ["9000", "9999"]],
    },
    "9947": {
        code: "9947",
        name: "Algeria",
        ranges: [["0", "1"], ["20", "79"], ["800", "999"]],
    },
    "9948": {
        code: "9948",
        name: "United Arab Emirates",
        ranges: [["00", "39"], ["400", "849"], ["8500", "9999"]],
    },
    "9949": {
        code: "9949",
        name: "Estonia",
        ranges: [["0", "0"], ["10", "39"], ["400", "899"], ["9000", "9999"]],
    },
    "9950": {
        code: "9950",
        name: "Palestine",
        ranges: [["00", "29"], ["300", "849"], ["8500", "9999"]],
    },
    "9951": {
        code: "9951",
        name: "Kosova",
        ranges: [["00", "39"], ["400", "849"], ["8500", "9999"]],
    },
    "9952": {
        code: "9952",
        name: "Azerbaijan",
        ranges: [["0", "1"], ["20", "39"], ["400", "799"], ["8000", "9999"]],
    },
    "9953": {
        code: "9953",
        name: "Lebanon",
        ranges: [["0", "0"], ["10", "39"], ["400", "599"], ["60", "89"], ["9000", "9999"]],
    },
    "9954": {
        code: "9954",
        name: "Morocco",
        ranges: [["0", "1"], ["20", "39"], ["400", "799"], ["8000", "9999"]],
    },
    "9955": {
        code: "9955",
        name: "Lithuania",
        ranges: [["00", "39"], ["400", "929"], ["9300", "9999"]],
    },
    "9956": {
        code: "9956",
        name: "Cameroon",
        ranges: [["0", "0"], ["10", "39"], ["400", "899"], ["9000", "9999"]],
    },
    "9957": {
        code: "9957",
        name: "Jordan",
        ranges: [["00", "39"], ["400", "699"], ["70", "84"], ["8500", "8799"], ["88", "99"]],
    },
    "9958": {
        code: "9958",
        name: "Bosnia and Herzegovina",
        ranges: [
            ["00", "02"], ["0300", "0399"], ["040", "089"], ["0900", "0999"], ["10", "18"], ["1900", "1999"],
            ["20", "49"], ["500", "899"], ["9000", "9999"]
        ],
    },
    "9959": {
        code: "9959",
        name: "Libya",
        ranges: [["0", "1"], ["20", "79"], ["800", "949"], ["9500", "9699"], ["970", "979"], ["98", "99"]],
    },
    "9960": {
        code: "9960",
        name: "Saudi Arabia",
        ranges: [["00", "59"], ["600", "899"], ["9000", "9999"]],
    },
    "9961": {
        code: "9961",
        name: "Algeria",
        ranges: [["0", "2"], ["30", "69"], ["700", "949"], ["9500", "9999"]],
    },
    "9962": {
        code: "9962",
        name: "Panama",
        ranges: [["00", "54"], ["5500", "5599"], ["56", "59"], ["600", "849"], ["8500", "9999"]],
    },
    "9963": {
        code: "9963",
        name: "Cyprus",
        ranges: [
            ["0", "1"], ["2000", "2499"], ["250", "279"], ["2800", "2999"], ["30", "54"], ["550", "734"],
            ["7350", "7499"], ["7500", "9999"]
        ],
    },
    "9964": {
        code: "9964",
        name: "Ghana",
        ranges: [["0", "6"], ["70", "94"], ["950", "999"]],
    },
    "9965": {
        code: "9965",
        name: "Kazakhstan",
        ranges: [["00", "39"], ["400", "899"], ["9000", "9999"]],
    },
    "9966": {
        code: "9966",
        name: "Kenya",
        ranges: [["000", "149"], ["1500", "1999"], ["20", "69"], ["7000", "7499"], ["750", "959"], ["9600", "9999"]],
    },
    "9967": {
        code: "9967",
        name: "Kyrgyz Republic",
        ranges: [["00", "39"], ["400", "899"], ["9000", "9999"]],
    },
    "9968": {
        code: "9968",
        name: "Costa Rica",
        ranges: [["00", "49"], ["500", "939"], ["9400", "9999"]],
    },
    "9970": {
        code: "9970",
        name: "Uganda",
        ranges: [["00", "39"], ["400", "899"], ["9000", "9999"]],
    },
    "9971": {
        code: "9971",
        name: "Singapore",
        ranges: [["0", "5"], ["60", "89"], ["900", "989"], ["9900", "9999"]],
    },
    "9972": {
        code: "9972",
        name: "Peru",
        ranges: [
            ["00", "09"], ["1", "1"], ["200", "249"], ["2500", "2999"], ["30", "59"], ["600", "899"], ["9000", "9999"]
        ],
    },
    "9973": {
        code: "9973",
        name: "Tunisia",
        ranges: [["00", "05"], ["060", "089"], ["0900", "0999"], ["10", "69"], ["700", "969"], ["9700", "9999"]],
    },
    "9974": {
        code: "9974",
        name: "Uruguay",
        ranges: [["0", "2"], ["30", "54"], ["550", "749"], ["7500", "9499"], ["95", "99"]],
    },
    "9975": {
        code: "9975",
        name: "Moldova",
        ranges: [["0", "0"], ["100", "399"], ["4000", "4499"], ["45", "89"], ["900", "949"], ["9500", "9999"]],
    },
    "9976": {
        code: "9976",
        name: "Tanzania",
        ranges: [["0", "5"], ["60", "89"], ["900", "989"], ["9900", "9999"]],
    },
    "9977": {
        code: "9977",
        name: "Costa Rica",
        ranges: [["00", "89"], ["900", "989"], ["9900", "9999"]],
    },
    "9978": {
        code: "9978",
        name: "Ecuador",
        ranges: [["00", "29"], ["300", "399"], ["40", "94"], ["950", "989"], ["9900", "9999"]],
    },
    "9979": {
        code: "9979",
        name: "Iceland",
        ranges: [["0", "4"], ["50", "64"], ["650", "659"], ["66", "75"], ["760", "899"], ["9000", "9999"]],
    },
    "9980": {
        code: "9980",
        name: "Papua New Guinea",
        ranges: [["0", "3"], ["40", "89"], ["900", "989"], ["9900", "9999"]],
    },
    "9981": {
        code: "9981",
        name: "Morocco",
        ranges: [["00", "09"], ["100", "159"], ["1600", "1999"], ["20", "79"], ["800", "949"], ["9500", "9999"]],
    },
    "9982": {
        code: "9982",
        name: "Zambia",
        ranges: [["00", "79"], ["800", "989"], ["9900", "9999"]],
    },
    "9983": {
        code: "9983",
        name: "Gambia",
        ranges: [["80", "94"], ["950", "989"], ["9900", "9999"]],
    },
    "9984": {
        code: "9984",
        name: "Latvia",
        ranges: [["00", "49"], ["500", "899"], ["9000", "9999"]],
    },
    "9985": {
        code: "9985",
        name: "Estonia",
        ranges: [["0", "4"], ["50", "79"], ["800", "899"], ["9000", "9999"]],
    },
    "9986": {
        code: "9986",
        name: "Lithuania",
        ranges: [["00", "39"], ["400", "899"], ["9000", "9399"], ["940", "969"], ["97", "99"]],
    },
    "9987": {
        code: "9987",
        name: "Tanzania",
        ranges: [["00", "39"], ["400", "879"], ["8800", "9999"]],
    },
    "9988": {
        code: "9988",
        name: "Ghana",
        ranges: [["0", "2"], ["30", "54"], ["550", "749"], ["7500", "9999"]],
    },
    "9989": {
        code: "9989",
        name: "Macedonia",
        ranges: [["0", "0"], ["100", "199"], ["2000", "2999"], ["30", "59"], ["600", "949"], ["9500", "9999"]],
    },
    "99901": {
        code: "99901",
        name: "Bahrain",
        ranges: [["00", "49"], ["500", "799"], ["80", "99"]],
    },
    "99902": {
        code: "99902",
        name: "Gabon (reserved)",
        ranges: []
    },
    "99903": {
        code: "99903",
        name: "Mauritius",
        ranges: [["0", "1"], ["20", "89"], ["900", "999"]],
    },
    "99904": {
        code: "99904",
        name: "Curaï¿½ao",
        ranges: [["0", "5"], ["60", "89"], ["900", "999"]],
    },
    "99905": {
        code: "99905",
        name: "Bolivia",
        ranges: [["0", "3"], ["40", "79"], ["800", "999"]],
    },
    "99906": {
        code: "99906",
        name: "Kuwait",
        ranges: [["0", "2"], ["30", "59"], ["600", "699"], ["70", "89"], ["90", "94"], ["950", "999"]],
    },
    "99908": {
        code: "99908",
        name: "Malawi",
        ranges: [["0", "0"], ["10", "89"], ["900", "999"]],
    },
    "99909": {
        code: "99909",
        name: "Malta",
        ranges: [["0", "3"], ["40", "94"], ["950", "999"]],
    },
    "99910": {
        code: "99910",
        name: "Sierra Leone",
        ranges: [["0", "2"], ["30", "89"], ["900", "999"]],
    },
    "99911": {
        code: "99911",
        name: "Lesotho",
        ranges: [["00", "59"], ["600", "999"]],
    },
    "99912": {
        code: "99912",
        name: "Botswana",
        ranges: [["0", "3"], ["400", "599"], ["60", "89"], ["900", "999"]],
    },
    "99913": {
        code: "99913",
        name: "Andorra",
        ranges: [["0", "2"], ["30", "35"], ["600", "604"]],
    },
    "99914": {
        code: "99914",
        name: "Suriname",
        ranges: [["0", "4"], ["50", "89"], ["900", "999"]],
    },
    "99915": {
        code: "99915",
        name: "Maldives",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99916": {
        code: "99916",
        name: "Namibia",
        ranges: [["0", "2"], ["30", "69"], ["700", "999"]],
    },
    "99917": {
        code: "99917",
        name: "Brunei Darussalam",
        ranges: [["0", "2"], ["30", "89"], ["900", "999"]],
    },
    "99918": {
        code: "99918",
        name: "Faroe Islands",
        ranges: [["0", "3"], ["40", "79"], ["800", "999"]],
    },
    "99919": {
        code: "99919",
        name: "Benin",
        ranges: [
            ["0", "2"], ["300", "399"], ["40", "69"], ["70", "79"], ["800", "849"], ["850", "899"], ["900", "999"]
        ],
    },
    "99920": {
        code: "99920",
        name: "Andorra",
        ranges: [["0", "4"], ["50", "89"], ["900", "999"]],
    },
    "99921": {
        code: "99921",
        name: "Qatar",
        ranges: [["0", "1"], ["20", "69"], ["700", "799"], ["8", "8"], ["90", "99"]],
    },
    "99922": {
        code: "99922",
        name: "Guatemala",
        ranges: [["0", "3"], ["40", "69"], ["700", "999"]],
    },
    "99923": {
        code: "99923",
        name: "El Salvador",
        ranges: [["0", "1"], ["20", "79"], ["800", "999"]],
    },
    "99924": {
        code: "99924",
        name: "Nicaragua",
        ranges: [["0", "1"], ["20", "79"], ["800", "999"]],
    },
    "99925": {
        code: "99925",
        name: "Paraguay",
        ranges: [["0", "3"], ["40", "79"], ["800", "999"]],
    },
    "99926": {
        code: "99926",
        name: "Honduras",
        ranges: [["0", "0"], ["10", "59"], ["600", "899"], ["90", "99"]],
    },
    "99927": {
        code: "99927",
        name: "Albania",
        ranges: [["0", "2"], ["30", "59"], ["600", "999"]],
    },
    "99928": {
        code: "99928",
        name: "Georgia",
        ranges: [["0", "0"], ["10", "79"], ["800", "999"]],
    },
    "99929": {
        code: "99929",
        name: "Mongolia",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99930": {
        code: "99930",
        name: "Armenia",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99931": {
        code: "99931",
        name: "Seychelles",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99932": {
        code: "99932",
        name: "Malta",
        ranges: [["0", "0"], ["10", "59"], ["600", "699"], ["7", "7"], ["80", "99"]],
    },
    "99933": {
        code: "99933",
        name: "Nepal",
        ranges: [["0", "2"], ["30", "59"], ["600", "999"]],
    },
    "99934": {
        code: "99934",
        name: "Dominican Republic",
        ranges: [["0", "1"], ["20", "79"], ["800", "999"]],
    },
    "99935": {
        code: "99935",
        name: "Haiti",
        ranges: [["0", "2"], ["30", "59"], ["600", "699"], ["7", "8"], ["90", "99"]],
    },
    "99936": {
        code: "99936",
        name: "Bhutan",
        ranges: [["0", "0"], ["10", "59"], ["600", "999"]],
    },
    "99937": {
        code: "99937",
        name: "Macau",
        ranges: [["0", "1"], ["20", "59"], ["600", "999"]],
    },
    "99938": {
        code: "99938",
        name: "Srpska, Republic of",
        ranges: [["0", "1"], ["20", "59"], ["600", "899"], ["90", "99"]],
    },
    "99939": {
        code: "99939",
        name: "Guatemala",
        ranges: [["0", "5"], ["60", "89"], ["900", "999"]],
    },
    "99940": {
        code: "99940",
        name: "Georgia",
        ranges: [["0", "0"], ["10", "69"], ["700", "999"]],
    },
    "99941": {
        code: "99941",
        name: "Armenia",
        ranges: [["0", "2"], ["30", "79"], ["800", "999"]],
    },
    "99942": {
        code: "99942",
        name: "Sudan",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99943": {
        code: "99943",
        name: "Albania",
        ranges: [["0", "2"], ["30", "59"], ["600", "999"]],
    },
    "99944": {
        code: "99944",
        name: "Ethiopia",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99945": {
        code: "99945",
        name: "Namibia",
        ranges: [["0", "5"], ["60", "89"], ["900", "999"]],
    },
    "99946": {
        code: "99946",
        name: "Nepal",
        ranges: [["0", "2"], ["30", "59"], ["600", "999"]],
    },
    "99947": {
        code: "99947",
        name: "Tajikistan",
        ranges: [["0", "2"], ["30", "69"], ["700", "999"]],
    },
    "99948": {
        code: "99948",
        name: "Eritrea",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99949": {
        code: "99949",
        name: "Mauritius",
        ranges: [["0", "1"], ["20", "89"], ["900", "999"]],
    },
    "99950": {
        code: "99950",
        name: "Cambodia",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99951": {
        code: "99951",
        name: "Congo, The Democratic Republic",
        ranges: []
    },
    "99952": {
        code: "99952",
        name: "Mali",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99953": {
        code: "99953",
        name: "Paraguay",
        ranges: [["0", "2"], ["30", "79"], ["800", "939"], ["94", "99"]],
    },
    "99954": {
        code: "99954",
        name: "Bolivia",
        ranges: [["0", "2"], ["30", "69"], ["700", "879"], ["88", "99"]],
    },
    "99955": {
        code: "99955",
        name: "Srpska, Republic of",
        ranges: [["0", "1"], ["20", "59"], ["600", "799"], ["80", "99"]],
    },
    "99956": {
        code: "99956",
        name: "Albania",
        ranges: [["00", "59"], ["600", "859"], ["86", "99"]],
    },
    "99957": {
        code: "99957",
        name: "Malta",
        ranges: [["0", "1"], ["20", "79"], ["800", "999"]],
    },
    "99958": {
        code: "99958",
        name: "Bahrain",
        ranges: [["0", "4"], ["50", "94"], ["950", "999"]],
    },
    "99959": {
        code: "99959",
        name: "Luxembourg",
        ranges: [["0", "2"], ["30", "59"], ["600", "999"]],
    },
    "99960": {
        code: "99960",
        name: "Malawi",
        ranges: [["0", "0"], ["10", "94"], ["950", "999"]],
    },
    "99961": {
        code: "99961",
        name: "El Salvador",
        ranges: [["0", "3"], ["40", "89"], ["900", "999"]],
    },
    "99962": {
        code: "99962",
        name: "Mongolia",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99963": {
        code: "99963",
        name: "Cambodia",
        ranges: [["00", "49"], ["500", "999"]],
    },
    "99964": {
        code: "99964",
        name: "Nicaragua",
        ranges: [["0", "1"], ["20", "79"], ["800", "999"]],
    },
    "99965": {
        code: "99965",
        name: "Macau",
        ranges: [["0", "3"], ["40", "69"], ["700", "999"]],
    },
    "99966": {
        code: "99966",
        name: "Kuwait",
        ranges: [["0", "2"], ["30", "69"], ["700", "799"]],
    },
    "99967": {
        code: "99967",
        name: "Paraguay",
        ranges: [["0", "1"], ["20", "59"], ["600", "899"]],
    },
    "99968": {
        code: "99968",
        name: "Botswana",
        ranges: [["0", "3"], ["400", "599"], ["60", "89"], ["900", "999"]],
    },
    "99969": {
        code: "99969",
        name: "Oman",
        ranges: [["0", "4"], ["50", "79"], ["800", "999"]],
    },
    "99970": {
        code: "99970",
        name: "Haiti",
        ranges: [["0", "4"], ["50", "89"], ["900", "999"]],
    },
    "99971": {
        code: "99971",
        name: "Myanmar",
        ranges: [["0", "5"], ["60", "84"], ["850", "999"]],
    },
    "99972": {
        code: "99972",
        name: "Faroe Islands",
        ranges: [["0", "4"], ["50", "89"], ["900", "999"]],
    },
    "99973": {
        code: "99973",
        name: "Mongolia",
        ranges: [["0", "3"], ["40", "79"], ["800", "999"]],
    },
    "99974": {
        code: "99974",
        name: "Bolivia",
        ranges: [["40", "79"], ["800", "999"]],
    },
    "99975": {
        code: "99975",
        name: "Tajikistan",
        ranges: [["0", "3"], ["40", "79"], ["800", "999"]],
    },
    "99976": {
        code: "99976",
        name: "Srpska, Republic of",
        ranges: [["0", "1"], ["20", "59"], ["600", "799"]],
    },
};
exports.Isbn = (() => {
    const merge = function (t, u) {
        return Object.defineProperties(t, Object.getOwnPropertyDescriptors(u));
    };
    const calcCheckDigit = function (isbn) {
        if (isbn.match(/^\d{9}[\dX]?$/)) {
            let c = 0;
            for (let n = 0; n < 9; n++) {
                c += (10 - n) * parseInt(isbn[n]);
            }
            c = (11 - c % 11) % 11;
            return c === 10 ? "X" : String(c);
        }
        else if (isbn.match(/(?:978|979)\d{9}[\dX]?/)) {
            let c = 0;
            for (let n = 0; n < 12; n += 2) {
                c += parseInt(isbn[n]) + 3 * parseInt(isbn[n + 1]);
            }
            return String((10 - c % 10) % 10);
        }
        return null;
    };
    const buildRemainingFields = function (isbn) {
        if (!isbn) {
            return null;
        }
        const isbn10Prefix = "978";
        const { group, prefix = "978", publisher, article } = isbn;
        if (!group) {
            return null;
        }
        const parts = [group.code, publisher, article];
        const isbnString = parts.join("");
        const check10 = calcCheckDigit(isbnString);
        if (!check10) {
            return null;
        }
        const check13 = calcCheckDigit(prefix + isbnString);
        if (!check13) {
            return null;
        }
        const parts13 = [prefix, ...parts, check13];
        const isbn13 = parts13.join("");
        const isbn13Hyphenated = parts13.join("-");
        merge(isbn, {
            isbn13,
            isbn13Hyphenated,
            check10,
            check13,
            asIsbn10() {
                return null;
            },
            asIsbn13(hyphenate = false) {
                return hyphenate ? isbn13Hyphenated : isbn13;
            },
        });
        if (prefix === isbn10Prefix) {
            const parts10 = [...parts, check10];
            const isbn10 = parts10.join("");
            const isbn10Hyphenated = parts10.join("-");
            merge(isbn, {
                isbn10,
                isbn10Hyphenated,
                asIsbn10(hyphenate = false) {
                    return hyphenate ? isbn10Hyphenated : isbn10;
                },
                asIsbn13() {
                    return null;
                },
            });
        }
        const _isbn = isbn;
        let _book = null;
        let bookPromise = null;
        isbn.fetchBook = async function () {
            try {
                return _isbn.book || _isbn.setBook(await api_1.api.resolveIsbn(_isbn));
            }
            catch (e) {
                bookPromise = null; // retry next time if error first time
                throw e;
            }
        };
        isbn.setBook = (book) => {
            // would cancel fetch call if possible, but impossible
            _book = book;
            bookPromise = Promise.resolve(book);
            return book;
        };
        merge(isbn, {
            get book() {
                return _book;
            },
        });
        let _department = "General";
        merge(isbn, {
            get department() {
                return _department;
            },
            setDepartment(department) {
                _department = department;
                if (bookPromise) {
                    (async () => (await bookPromise).department = department)();
                }
            },
        });
        _isbn.freeze();
        return _isbn;
    };
    const fastCache = new Map(); // stores raw isbnString
    const fullCache = new Map(); // stores validated, standardized isbn13
    const checkCache = function (cache, key, supplier) {
        const cachedIsbn = cache.get(key);
        if (cachedIsbn) {
            return cachedIsbn;
        }
        const isbn = supplier();
        if (!isbn) {
            return null;
        }
        cache.set(key, isbn);
        return isbn;
    };
    return {
        parse(isbnString, _groups = Object.values(GROUPS)) {
            const groups = _groups;
            const getGroupRecord = function (isbn10) {
                for (const group of groups) {
                    if (isbn10.match(`^${group.code}(.+)`)) {
                        return {
                            group,
                            rest: RegExp.$1,
                        };
                    }
                }
                return null;
            };
            const splitAndBuild10 = function (isbn10) {
                const record = getGroupRecord(isbn10);
                if (!record) {
                    return null;
                }
                const { group, rest } = record;
                for (const range of group.ranges) {
                    const [start, end] = range;
                    const key = rest.substring(0, start.length);
                    if (start <= key && end >= key) {
                        const _rest = rest.substring(key.length);
                        return {
                            group,
                            publisher: key,
                            article: _rest.substring(0, _rest.length - 1),
                            check: _rest[_rest.length - 1],
                        };
                    }
                }
                return null;
            };
            const splitAndBuild = function (isbn) {
                return !isbn
                    ? null
                    : isbn.length === 13
                        ? merge(splitAndBuild(isbn.substring(3)), {
                            prefix: isbn.substring(0, 3),
                        })
                        : isbn.length === 10
                            ? splitAndBuild10(isbn) : null;
            };
            const parse = function (isbnString) {
                const val = isbnString.trim();
                const isbn = val.match(/^\d{9}[\dX]$/)
                    ? buildRemainingFields(merge({
                        source: val,
                        isIsbn10: () => true,
                        isIsbn13: () => false,
                    }, splitAndBuild(val)))
                    : val.length === 13 && val.match(/^(\d+)-(\d+)-(\d+)-([\dX])$/)
                        ? buildRemainingFields({
                            source: val,
                            isIsbn10: () => true,
                            isIsbn13: () => false,
                            group: GROUPS[RegExp.$1],
                            publisher: RegExp.$2,
                            article: RegExp.$3,
                            check: RegExp.$4,
                        })
                        : val.match(/^(978|979)(\d{9}[\dX]$)/)
                            ? buildRemainingFields(merge({
                                source: val,
                                isIsbn10: () => false,
                                isIsbn13: () => true,
                                prefix: RegExp.$1,
                            }, splitAndBuild(val)))
                            : val.length === 17 && val.match(/^(978|979)-(\d+)-(\d+)-(\d+)-([\dX])$/)
                                ? buildRemainingFields({
                                    source: val,
                                    isIsbn10: () => false,
                                    isIsbn13: () => true,
                                    prefix: RegExp.$1,
                                    group: GROUPS[RegExp.$2],
                                    publisher: RegExp.$3,
                                    article: RegExp.$4,
                                    check: RegExp.$5
                                })
                                : null;
                // check is like a hashsum
                if (!isbn || isbn.check !== (isbn.isIsbn13() ? isbn.check13 : isbn.check10)) {
                    return null;
                }
                return isbn;
            };
            return checkCache(fastCache, isbnString, () => {
                const isbn = parse(isbnString);
                return isbn && checkCache(fullCache, isbn.isbn13, () => isbn);
            });
        },
    }.freeze();
})();
anyWindow_1.anyWindow.Isbn = exports.Isbn;
//# sourceMappingURL=Isbn.js.map